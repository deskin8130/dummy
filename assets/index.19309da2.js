import{r as a,j as N}from"./index.57acfe93.js";import{u as S,a as y,M as T,i as X,b as z,c as V,d as q,s as D,e as G,m as $}from"./motion.cb3955b5.js";function I(e){const t=S(()=>y(e)),{isStatic:n}=a.exports.useContext(T);if(n){const[,s]=a.exports.useState(e);a.exports.useEffect(()=>t.onChange(s),[])}return t}const J=e=>typeof e=="object"&&e.mix,U=e=>J(e)?e.mix:void 0;function K(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],o=e[1+n],r=e[2+n],i=e[3+n],c=X(o,r,{mixer:U(r[0]),...i});return t?c(s):c}function Q(e,t){z(()=>{if(V(e))return e.onChange(t)},[t])}function Z(e,t,n){z(()=>{const s=e.map(o=>o.onChange(t));return()=>{s.forEach(o=>o()),n()}})}function ee(e,t){const n=I(t()),s=()=>n.set(t());return s(),Z(e,()=>D.update(s,!1,!0),()=>q.update(s)),n}function te(e,t,n,s){const o=typeof t=="function"?t:K(t,n,s);return Array.isArray(e)?A(e,o):A([e],([r])=>o(r))}function A(e,t){const n=S(()=>[]);return ee(e,()=>{n.length=0;const s=e.length;for(let o=0;o<s;o++)n[o]=e[o].get();return t(n)})}function ne(e,t={}){const{isStatic:n}=a.exports.useContext(T),s=a.exports.useRef(null),o=I(V(e)?e.get():e);return a.exports.useMemo(()=>o.attach((r,i)=>n?i(r):(s.current&&s.current.stop(),s.current=G({from:o.get(),to:r,velocity:o.getVelocity(),...t,onUpdate:i}),o.get())),[JSON.stringify(t)]),Q(e,r=>o.set(parseFloat(r))),o}const se=(e,t,n)=>Math.min(Math.max(n,e),t),H=e=>typeof e=="number",oe=e=>Array.isArray(e)&&!H(e[0]),re=(e,t,n)=>{const s=t-e;return((n-e)%s+s)%s+e};function ie(e,t){return oe(e)?e[re(0,e.length,t)]:e}const B=(e,t,n)=>-n*e+n*t+e,j=e=>e,b=(e,t,n)=>t-e===0?1:(n-e)/(t-e);function k(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const o=b(0,t,s);e.push(B(n,1,o))}}function Y(e){const t=[0];return k(t,e-1),t}function ce(e,t=Y(e.length),n=j){const s=e.length,o=s-t.length;return o>0&&k(t,o),r=>{let i=0;for(;i<s-2&&!(r<t[i+1]);i++);let c=se(0,1,b(t[i],t[i+1],r));return c=ie(n,i)(c),B(e[i],e[i+1],c)}}const F=e=>typeof e=="function",_=e=>typeof e=="string";function le(e,t){return t?e*(1e3/t):0}function fe(e,t){var n;return typeof e=="string"?t?((n=t[e])!==null&&n!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function ue(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n}const w=new WeakMap;let h;function ae(e,t){if(t){const{inlineSize:n,blockSize:s}=t[0];return{width:n,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function de({target:e,contentRect:t,borderBoxSize:n}){var s;(s=w.get(e))===null||s===void 0||s.forEach(o=>{o({target:e,contentSize:t,get size(){return ae(e,n)}})})}function ge(e){e.forEach(de)}function he(){typeof ResizeObserver>"u"||(h=new ResizeObserver(ge))}function pe(e,t){h||he();const n=fe(e);return n.forEach(s=>{let o=w.get(s);o||(o=new Set,w.set(s,o)),o.add(t),h==null||h.observe(s)}),()=>{n.forEach(s=>{const o=w.get(s);o==null||o.delete(t),o!=null&&o.size||h==null||h.unobserve(s)})}}const x=new Set;let v;function ye(){v=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};x.forEach(n=>n(t))},window.addEventListener("resize",v)}function ve(e){return x.add(e),v||ye(),()=>{x.delete(e),!x.size&&v&&(v=void 0)}}function me(e,t){return F(e)?ve(e):pe(e,t)}const we=50,W=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),xe=()=>({time:0,x:W(),y:W()}),Ee={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function M(e,t,n,s){const o=n[t],{length:r,position:i}=Ee[t],c=o.current,g=n.time;o.current=e["scroll"+i],o.scrollLength=e["scroll"+r]-e["client"+r],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=b(0,o.scrollLength,o.current);const l=s-g;o.velocity=l>we?0:le(o.current-c,l)}function Le(e,t,n){M(e,"x",t,n),M(e,"y",t,n),t.time=n}function Oe(e,t){let n={x:0,y:0},s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s instanceof SVGGraphicsElement&&"getBBox"in s){const{top:o,left:r}=s.getBBox();for(n.x+=r,n.y+=o;s&&s.tagName!=="svg";)s=s.parentNode}return n}const Se={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},O={start:0,center:.5,end:1};function P(e,t,n=0){let s=0;if(O[e]!==void 0&&(e=O[e]),_(e)){const o=parseFloat(e);e.endsWith("px")?s=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?s=o/100*document.documentElement.clientWidth:e.endsWith("vh")?s=o/100*document.documentElement.clientHeight:e=o}return H(e)&&(s=t*e),n+s}const ze=[0,0];function He(e,t,n,s){let o=Array.isArray(e)?e:ze,r=0,i=0;return H(e)?o=[e,e]:_(e)&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,O[e]?e:"0"]),r=P(o[0],n,s),i=P(o[1],t),r-i}const be={x:0,y:0};function Ae(e,t,n){let{offset:s=Se.All}=n;const{target:o=e,axis:r="y"}=n,i=r==="y"?"height":"width",c=o!==e?Oe(o,e):be,g=o===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:o.clientWidth,height:o.clientHeight},l={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let u=!t[r].interpolate;const d=s.length;for(let f=0;f<d;f++){const m=He(s[f],l[i],g[i],c[r]);!u&&m!==t[r].interpolatorOffsets[f]&&(u=!0),t[r].offset[f]=m}u&&(t[r].interpolate=ce(Y(d),t[r].offset),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=t[r].interpolate(t[r].current)}function We(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!=e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function Me(e,t,n,s={}){const o=s.axis||"y";return{measure:()=>We(e,s.target,n),update:r=>{Le(e,n,r),(s.offset||s.target)&&Ae(e,n,s)},notify:F(t)?()=>t(n):Pe(t,n[o])}}function Pe(e,t){return e.pause(),e.forEachNative((n,{easing:s})=>{var o,r;if(n.updateDuration)s||(n.easing=j),n.updateDuration(1);else{const i={duration:1e3};s||(i.easing="linear"),(r=(o=n.effect)===null||o===void 0?void 0:o.updateTiming)===null||r===void 0||r.call(o,i)}}),()=>{e.currentTime=t.progress}}const p=new WeakMap,C=new WeakMap,L=new WeakMap,R=e=>e===document.documentElement?window:e;function Ce(e,t={}){var{container:n=document.documentElement}=t,s=ue(t,["container"]);let o=L.get(n);o||(o=new Set,L.set(n,o));const r=xe(),i=Me(n,e,r,s);if(o.add(i),!p.has(n)){const l=()=>{const d=performance.now();for(const f of o)f.measure();for(const f of o)f.update(d);for(const f of o)f.notify()};p.set(n,l);const u=R(n);window.addEventListener("resize",l,{passive:!0}),n!==document.documentElement&&C.set(n,me(n,l)),u.addEventListener("scroll",l,{passive:!0})}const c=p.get(n),g=requestAnimationFrame(c);return()=>{var l;typeof e!="function"&&e.stop(),cancelAnimationFrame(g);const u=L.get(n);if(!u||(u.delete(i),u.size))return;const d=p.get(n);p.delete(n),d&&(R(n).removeEventListener("scroll",d),(l=C.get(n))===null||l===void 0||l(),window.removeEventListener("resize",d))}}const Re=()=>({scrollX:y(0),scrollY:y(0),scrollXProgress:y(0),scrollYProgress:y(0)});function Te({container:e,target:t,layoutEffect:n=!0,...s}={}){const o=S(Re);return(n?z:a.exports.useEffect)(()=>Ce(({x:i,y:c})=>{o.scrollX.set(i.current),o.scrollXProgress.set(i.progress),o.scrollY.set(c.current),o.scrollYProgress.set(c.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),[]),o}const Be=({className:e,offset:t=10,bg:n})=>{const[s,o]=a.exports.useState(0),[r,i]=a.exports.useState(0),c=a.exports.useRef(null),g=s-r,l=s+t,{scrollY:u}=Te(),d=te(u,[g,l],[t,-t]),f=ne(d,{stiffness:600,damping:90});return a.exports.useLayoutEffect(()=>{const m=c.current,E=()=>{o(m.getBoundingClientRect().top+window.scrollY||window.pageYOffset),i(window.innerHeight)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[c]),N($.div,{className:e,ref:c,style:{y:f,backgroundImage:`url(${n})`}})};export{Be as P};
